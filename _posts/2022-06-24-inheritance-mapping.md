---
title: "[JPA ORM] 상속관계 매핑"
date: 2022-06-24
categories: JPA ORM Mapping

---

# 상속관계 매핑

   관계형 데이터베이스 구조 상 상속관계가 존재하지 않는다. 그러나 Java 객체지향 언어의 큰 장점을 DB 구현에 적용시키지 못한다면, 그것은 객체지향 언어를 사용하는 큰 의미가 사라진다고 할 수 있다.

   다행히도, 슈퍼타입 서브타입 관계라는 모델링 기법을 통해 객체 상속과 유사하게 설계를 할 수 있다. 즉, 객체의 상속 구조와 DB의 슈퍼타입 서브타입 관계를 동일하게 생각해 구현하면 된다.

   실제 모델로 구현하는 방법은 크게 3가지 방법이 존재한다.

- JOINED 전략: 공통된 속성을 하나의 abstract class로 받고, 이를 상속한 각각의 테이블로 구현
- SINGLE_TABLE 전략: 모든 속성을 하나의 커다란 통합 테이블로 구현
- TABLE_PER_CLASS 전략: 중복된 속성이 있어도 각각의 구현 클래스마다 테이블 만들기

   결론부터 말하자면, 세번째 TABLE_PER_CLASS 전략은 실무에서, 그리고 개인 프로젝트 시에도 사용하면 안된다. DB 설계와 ORM 구조 모두에서 장점보다 단점이 더 크기 때문이다. 여러 테이블을 함께 조회할때 UNION 이 필요하기 때문에 성능이 떨어지고, 하나의 필드를 기준으로 쿼리할 때에도 마찬가지로 모든 테이블을 모두 조회해야 하기 때문에 상당히 비효율적이다. 물론, 아무 신경쓰지 않고 명확하게 구분할 수 있으며 모든 필드에 not null을 설정할 수 있다는 장점은 존재한다. 그러나 단점이 훨씬 커보이는 것은 사실이다. 또, 단순히 개발자적 관점에서 볼때 중복 필드를 모으지 않고 따로 처리하는 것은 엄청난 시간적, 공간적 낭비가 아닐 수 없다.



   그렇다면 JOINED 전략, SINGLE_TABLE 전략 중에서는 무엇을 택해야 하는가? 이 두가지 전략 중 어느 것이 더 낫다라고 하기는 힘들다. 서비스나 프로젝트의 상황에 따라 장점과 단점을 잘 생각해보고, 그에 맞게 전략을 선택하면 된다.

   먼저 JOINED 전략의 장점은 

